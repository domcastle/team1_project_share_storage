- name: Deploy Redis worker
  template:
    src: redis_worker.py.j2
    dest: /opt/ai/redis_worker.py
    mode: '0755'

- name: Deploy ai-worker systemd service
  template:
    src: ai-worker.service.j2
    dest: /etc/systemd/system/ai-worker.service

- name: Reload systemd
  systemd:
    daemon_reload: yes

- name: Enable and start ai-worker
  systemd:
    name: ai-worker
    enabled: yes
    state: started
  when: not ansible_check_mode
